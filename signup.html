<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrarse</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Macondo&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <h1 class="logo">Epic Realms</h1>
    </header>

    <nav style="display: flex; flex-direction: column; align-items: center;">
        <ul style="display: flex; flex-direction: row; justify-content: flex-start;">
            <li><a class="nav-link" href="index.html">Inicio</a></li>
            <li><a class="nav-link" href="our-games.html">Nuestros Juegos</a></li>
            <li><a class="nav-link" href="about.html">Sobre Nosotros</a></li>
            <li><a class="nav-link" href="contact.html">Contacto</a></li>
            <li><a class="nav-link active" href="signup.html">
                <span>C</span><span>r</span><span>e</span><span>a</span><span>r</span>
                <span>C</span><span>u</span><span>e</span><span>n</span><span>t</span><span>a</span>
            </a></li>
        </ul>
    </nav>

    <main class="container mt-4" id="signup-form">
        <h2 class="text-center mb-4">Crear cuenta</h2>
        <form id="signupForm" class="needs-validation" novalidate>
            <div class="mb-3" id="fullname-container">
                <label for="fullname" class="form-label">Nombre Completo*:</label>
                <input type="text" class="form-control" id="fullname" name="fullname" required>
                <div class="invalid-feedback">
                    Por favor, ingrese su nombre completo.
                </div>
            </div>
            <div class="mb-3" id="username-container">
                <label for="username" class="form-label">Nombre de Usuario*:</label>
                <input type="text" class="form-control" id="username" name="username" required>
                <div class="invalid-feedback">
                    Por favor, ingrese un nombre de usuario.
                </div>
            </div>
            <div class="mb-3" id="email-container">
                <label for="email" class="form-label">Correo Electrónico*:</label>
                <input type="email" class="form-control" id="email" name="email" required>
                <div class="invalid-feedback">
                    Por favor, ingrese un correo electrónico válido.
                </div>
            </div>
            <div class="mb-3" id="birthdate-container">
                <label for="birthdate" class="form-label">Fecha de Nacimiento*:</label>
                <input type="date" class="form-control" id="birthdate" name="birthdate" required>
                <div class="form-text" style="display: flex; flex-direction: row; align-items: center; gap: 10px;">
                    <span id="birthdate-checkmark" class="text-success">&#10003;</span>
                    <span id="birthdate-cross" class="text-danger">&#10007;</span>
                    Debes ser mayor de 13 años para registrarte.
                </div>
            </div>
            <div class="mb-3" id="address-container">
                <label for="address" class="form-label">Dirección de despacho:</label>
                <input type="text" class="form-control" id="address" name="address">
            </div>
            <div class="mb-3" id="password-container">
                <label for="password" class="form-label">Contraseña*:</label>
                <input type="password" class="form-control" id="password" name="password" required>
                <div id="passwordHelpBlock" class="form-text">
                    <ul class="list-unstyled">
                        <li style="display: flex; flex-direction: row; align-items: center; gap: 10px;">
                            <span id="password-length-checkmark" class="text-success">&#10003;</span>
                            <span id="password-length-cross" class="text-danger">&#10007;</span>
                            La contraseña debe contener entre 6 y 18 caracteres
                        </li>
                        <li style="display: flex; flex-direction: row; align-items: center; gap: 10px;">
                            <span id="password-number-checkmark" class="text-success">&#10003;</span>
                            <span id="password-number-cross" class="text-danger">&#10007;</span>
                            La contraseña debe contener al menos un número
                        </li>
                        <li style="display: flex; flex-direction: row; align-items: center; gap: 10px;">
                            <span id="password-uppercase-checkmark" class="text-success">&#10003;</span>
                            <span id="password-uppercase-cross" class="text-danger">&#10007;</span>
                            La contraseña debe contener al menos una letra mayúscula
                        </li>
                    </ul>
                </div>
            </div>
            <div class="mb-3" id="repeat-password-container">
                <label for="repeat-password" class="form-label">Repetir Contraseña*:</label>
                <input type="password" class="form-control" id="repeat-password" name="repeat-password" required>
                <div class="invalid-feedback">
                    Las contraseñas no coinciden.
                </div>
            </div>
            <div class="d-flex justify-content-between">
                <button type="reset" class="btn btn-secondary" id="clear-button">Limpiar</button>
                <button type="submit" class="btn btn-primary" id="signup-button">Registrarse</button>
            </div>
        </form>
    </main>

    <footer>
        <p>&copy; 2024 Epic Realms RPG. Todos los derechos reservados.</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

    <script>
        document.getElementById('password-length-cross').style.display = 'block';

        const fields = ['fullname', 'username', 'email', 'birthdate', 'password', 'repeat-password'];
        function checkPassword() {
            const passwordEl = document.getElementById('password');
            const password = passwordEl.value;
            const atLeastOneNumber = /\d/.test(password);
            const atLeastOneUpperCase = /[A-Z]/.test(password);
            const betweenSixAndEighteenCharacters = password.length >= 6 && password.length <= 18;
            if (atLeastOneNumber) {
                document.getElementById('password-number-checkmark').style.display = 'inline';
                document.getElementById('password-number-cross').style.display = 'none';
            } else {
                document.getElementById('password-number-checkmark').style.display = 'none';
                document.getElementById('password-number-cross').style.display = 'inline';
            }
            if (atLeastOneUpperCase) {
                document.getElementById('password-uppercase-checkmark').style.display = 'inline';
                document.getElementById('password-uppercase-cross').style.display = 'none';
            } else {
                document.getElementById('password-uppercase-checkmark').style.display = 'none';
                document.getElementById('password-uppercase-cross').style.display = 'inline';
            }
            if (betweenSixAndEighteenCharacters) {
                document.getElementById('password-length-checkmark').style.display = 'inline';
                document.getElementById('password-length-cross').style.display = 'none';
            } else {
                document.getElementById('password-length-checkmark').style.display = 'none';
                document.getElementById('password-length-cross').style.display = 'inline';
            }
            if (atLeastOneNumber && atLeastOneUpperCase && betweenSixAndEighteenCharacters) {
                passwordEl.style.borderColor = 'green';
            } else {
                passwordEl.style.borderColor = 'red';
                return false;
            }
            return true;
        }

        function checkEmail() {
            const emailEl = document.getElementById('email');
            const email = emailEl.value;
            const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            if (emailRegex.test(email)) {
                emailEl.style.borderColor = 'green';
            } else {
                emailEl.style.borderColor = 'red';
                return false;
            }
            return true;
        }

        function checkRepeatPassword() {
            const repeatPasswordEl = document.getElementById('repeat-password');
            const password = document.getElementById('password').value;
            const repeatPassword = repeatPasswordEl.value;
            if (repeatPassword.trim().length > 0 && password === repeatPassword) {
                repeatPasswordEl.style.borderColor = 'green';
            } else {
                repeatPasswordEl.style.borderColor = 'red';
                return false;
            }
            return true;
        }

        function checkFullName() {
            const fullNameEl = document.getElementById('fullname');
            const fullname = fullNameEl.value;
            if (fullname.trim().length > 0) {
                fullNameEl.style.borderColor = 'green';
                document.querySelector('#fullname-container .invalid-feedback').style.display = 'none';
            } else {
                fullNameEl.style.borderColor = 'red';
                document.querySelector('#fullname-container .invalid-feedback').style.display = 'block';
                return false;
            }
            return true;
        }

        function checkUsername() {
            const usernameEl = document.getElementById('username');
            const username = usernameEl.value;
            if (username.trim().length > 0) {
                usernameEl.style.borderColor = 'green';
                document.querySelector('#username-container .invalid-feedback').style.display = 'none';
            } else {
                usernameEl.style.borderColor = 'red';
                document.querySelector('#username-container .invalid-feedback').style.display = 'block';
                return false;
            }
            return true;
        }
        
        function checkBirthdate() {
            const birthdateEl = document.getElementById('birthdate');
            const birthdate = new Date(birthdateEl.value);
            const today = new Date();
            const age = today.getFullYear() - birthdate.getFullYear();
            if (age >= 13 && age <= 100) {
                document.getElementById('birthdate-checkmark').style.display = 'inline';
                document.getElementById('birthdate-cross').style.display = 'none';
                birthdateEl.style.borderColor = 'green';
            } else {
                document.getElementById('birthdate-checkmark').style.display = 'none';
                document.getElementById('birthdate-cross').style.display = 'inline';
                birthdateEl.style.borderColor = 'red';
                return false;
            }
            return true;
        }

        fields.forEach(field => {
            document.getElementById(field).addEventListener('keyup', function() {
                if (field === 'fullname') {
                    checkFullName();
                } else if (field === 'username') {
                    checkUsername();
                } else if (field === 'birthdate') {
                    checkBirthdate();
                } else if (field === 'email') {
                    checkEmail();
                } else if (field === 'password') {
                    checkPassword();
                    checkRepeatPassword();
                } else if (field === 'repeat-password') {
                    checkRepeatPassword();
                }
                // if (checkFullName(false) && checkUsername(false) && checkBirthdate(false) && checkEmail(false) && checkPassword(false) && checkRepeatPassword(false)) {
                //     document.getElementById('signupForm').querySelector('button[type="submit"]').disabled = false;
                // } else {
                //     document.getElementById('signupForm').querySelector('button[type="submit"]').disabled = true;
                // }
            });
        });

        function clearForm() {
            document.querySelectorAll('.checkmark').forEach(checkmark => {
                checkmark.style.display = 'none';
            });
            fields.forEach(field => {
                document.getElementById(field).style.borderColor = '#ccc';
            });
            // document.getElementById('signupForm').querySelector('button[type="submit"]').disabled = true;

            document.getElementById('birthdate-checkmark').style.display = 'none';
            document.getElementById('birthdate-cross').style.display = 'inline';

            document.getElementById('password-number-checkmark').style.display = 'none';
            document.getElementById('password-number-cross').style.display = 'inline';
            document.getElementById('password-uppercase-checkmark').style.display = 'none';
            document.getElementById('password-uppercase-cross').style.display = 'inline';
            document.getElementById('password-length-checkmark').style.display = 'none';
            document.getElementById('password-length-cross').style.display = 'inline';

            document.getElementById('signupForm').reset();
        }

        document.getElementById('clear-button').addEventListener('click', clearForm);

        document.getElementById('signupForm').addEventListener('submit', function(event) {
            event.preventDefault();
            if (checkFullName() && checkUsername() && checkBirthdate() && checkEmail() && checkPassword() && checkRepeatPassword()) {
                alert('¡Registro exitoso!');
            }
        });
    </script>
</body>
</html>
