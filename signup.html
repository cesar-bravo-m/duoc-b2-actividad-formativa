<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrarse</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1 class="logo">Epic Realms</h1>
    </header>

    <nav>
        <ul>
            <li><a class="nav-link" href="index.html">Inicio</a></li>
            <li><a class="nav-link" href="our-games.html">Nuestros Juegos</a></li>
            <li><a class="nav-link" href="about.html">Sobre Nosotros</a></li>
            <li><a class="nav-link" href="contact.html">Contacto</a></li>
            <li><a class="nav-link active" href="signup.html">
                <span>C</span><span>r</span><span>e</span><span>a</span><span>r</span>
                <span>C</span><span>u</span><span>e</span><span>n</span><span>t</span><span>a</span>
            </a></li>
        </ul>
    </nav>
    <main id="signup-form">
        <h2 style="text-align: center; margin-top: -0.5rem;">Crear cuenta</h2>
        <form id="signupForm" action="/submit-signup" method="post">
            <div>
                <label for="fullname">Nombre Completo*:</label>
                <input type="text" id="fullname" name="fullname" required>
                <span class="checkmark">&#10003;</span>
            </div>
            <div>
                <label for="username">Nombre de Usuario*:</label>
                <input type="text" id="username" name="username" required>
                <span class="checkmark">&#10003;</span>
            </div>
            <div>
                <label for="email">Correo Electrónico*:</label>
                <input type="email" id="email" name="email" required>
                <span class="checkmark">&#10003;</span>
            </div>
            <div>
                <label for="birthdate">Fecha de Nacimiento*:</label>
                <input type="date" id="birthdate" name="birthdate" required>
                <small style="display: flex; align-items: center; gap: 5px;">
                    <span id="birthdate-checkmark" style="display: none; ">&#10003;</span>
                    <span id="birthdate-cross" style="display: block; ">&#10007;</span>
                    Debes ser mayor de 13 años para registrarte.
                </small>
            </div>
            <div>
                <label for="address">Dirección de despacho:</label>
                <input type="text" id="address" name="address">
                <span class="checkmark">&#10003;</span>
            </div>
            <div>
                <label for="password">Contraseña*:</label>
                <input type="password" id="password" name="password" required>
                <div style="display: flex; flex-direction: column; gap: 5px; margin-bottom: -0.8rem;">
                    <small style="display: flex; align-items: center; gap: 5px;">
                        <span id="password-length-checkmark" style="display: none; ">&#10003;</span>
                        <span id="password-length-cross" style="display: block; ">&#10007;</span>
                        La contraseña debe contener entre 6 y 18 caracteres
                    </small>
                    <small style="display: flex; align-items: center; gap: 5px;">
                        <span id="password-number-checkmark" style="display: none; ">&#10003;</span>
                        <span id="password-number-cross" style="display: block; ">&#10007;</span>
                        La contraseña debe contener al menos un número
                    </small>
                    <small style="display: flex; align-items: center; gap: 5px;">
                        <span id="password-uppercase-checkmark" style="display: none; ">&#10003;</span>
                        <span id="password-uppercase-cross" style="display: block; ">&#10007;</span>
                        La contraseña debe contener al menos una letra mayúscula
                    </small>
                </div>
            </div>
            <div>
                <label for="repeat-password">Repetir Contraseña*:</label>
                <input type="password" id="repeat-password" name="repeat-password" required>
                <span class="checkmark">&#10003;</span>
            </div>
            <div style="display: flex; justify-content: space-between; gap: 1rem;">
                <button type="reset" class="clear-button" id="clear-button">Limpiar</button>
                <button type="submit" class="cta-button" disabled>Registrarse</button>
            </div>
        </form>
    </main>
    <footer>
        <p>&copy; 2024 Epic Realms RPG. Todos los derechos reservados.</p>
    </footer>

    <script>
        document.getElementById('password-length-cross').style.display = 'block';

        const fields = ['fullname', 'username', 'email', 'birthdate', 'password', 'repeat-password'];

        function checkPassword() {
            const passwordEl = document.getElementById('password');
            const password = passwordEl.value;
            const atLeastOneNumber = /\d/.test(password);
            const atLeastOneUpperCase = /[A-Z]/.test(password);
            const betweenSixAndEighteenCharacters = password.length >= 6 && password.length <= 18;
            if (atLeastOneNumber) {
                document.getElementById('password-number-checkmark').style.display = 'inline';
                document.getElementById('password-number-cross').style.display = 'none';
            } else {
                document.getElementById('password-number-checkmark').style.display = 'none';
                document.getElementById('password-number-cross').style.display = 'inline';
            }
            if (atLeastOneUpperCase) {
                document.getElementById('password-uppercase-checkmark').style.display = 'inline';
                document.getElementById('password-uppercase-cross').style.display = 'none';
            } else {
                document.getElementById('password-uppercase-checkmark').style.display = 'none';
                document.getElementById('password-uppercase-cross').style.display = 'inline';
            }
            if (betweenSixAndEighteenCharacters) {
                document.getElementById('password-length-checkmark').style.display = 'inline';
                document.getElementById('password-length-cross').style.display = 'none';
            } else {
                document.getElementById('password-length-checkmark').style.display = 'none';
                document.getElementById('password-length-cross').style.display = 'inline';
            }
            if (atLeastOneNumber && atLeastOneUpperCase && betweenSixAndEighteenCharacters) {
                passwordEl.style.borderColor = 'green';
            } else {
                passwordEl.style.borderColor = 'red';
                return false;
            }
            return true;
        }

        function checkEmail() {
            const emailEl = document.getElementById('email');
            const email = emailEl.value;
            const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            if (emailRegex.test(email)) {
                emailEl.nextElementSibling.style.display = 'inline';
                emailEl.style.borderColor = 'green';
            } else {
                emailEl.nextElementSibling.style.display = 'none';
                emailEl.style.borderColor = 'red';
                return false;
            }
            return true;
        }

        function checkRepeatPassword() {
            const repeatPasswordEl = document.getElementById('repeat-password');
            const password = document.getElementById('password').value;
            const repeatPassword = repeatPasswordEl.value;
            if (repeatPassword.trim().length > 0 && password === repeatPassword) {
                repeatPasswordEl.nextElementSibling.style.display = 'inline';
                repeatPasswordEl.style.borderColor = 'green';
            } else {
                repeatPasswordEl.nextElementSibling.style.display = 'none';
                repeatPasswordEl.style.borderColor = 'red';
                return false;
            }
            return true;
        }

        function checkFullName() {
            const fullNameEl = document.getElementById('fullname');
            const fullname = fullNameEl.value;
            if (fullname.trim().length > 0) {
                fullNameEl.nextElementSibling.style.display = 'inline';
                fullNameEl.style.borderColor = 'green';
            } else {
                fullNameEl.nextElementSibling.style.display = 'none';
                fullNameEl.style.borderColor = 'red';
                return false;
            }
            return true;
        }

        function checkUsername() {
            const usernameEl = document.getElementById('username');
            const username = usernameEl.value;
            if (username.trim().length > 0) {
                usernameEl.nextElementSibling.style.display = 'inline';
                usernameEl.style.borderColor = 'green';
            } else {
                usernameEl.nextElementSibling.style.display = 'none';
                usernameEl.style.borderColor = 'red';
                return false;
            }
            return true;
        }
        
        function checkBirthdate() {
            const birthdateEl = document.getElementById('birthdate');
            const birthdate = new Date(birthdateEl.value);
            const today = new Date();
            const age = today.getFullYear() - birthdate.getFullYear();
            if (age >= 13) {
                document.getElementById('birthdate-checkmark').style.display = 'inline';
                document.getElementById('birthdate-cross').style.display = 'none';
                birthdateEl.style.borderColor = 'green';
            } else {
                document.getElementById('birthdate-checkmark').style.display = 'none';
                document.getElementById('birthdate-cross').style.display = 'inline';
                birthdateEl.style.borderColor = 'red';
                return false;
            }
            return true;
        }

        fields.forEach(field => {
            document.getElementById(field).addEventListener('keyup', function() {
                if (field === 'fullname') {
                    checkFullName();
                } else if (field === 'username') {
                    checkUsername();
                } else if (field === 'birthdate') {
                    checkBirthdate();
                } else if (field === 'email') {
                    checkEmail();
                } else if (field === 'password') {
                    checkPassword();
                    checkRepeatPassword();
                } else if (field === 'repeat-password') {
                    checkRepeatPassword();
                }
                if (checkFullName() && checkUsername() && checkBirthdate() && checkEmail() && checkPassword() && checkRepeatPassword()) {
                    document.getElementById('signupForm').querySelector('button[type="submit"]').disabled = false;
                } else {
                    document.getElementById('signupForm').querySelector('button[type="submit"]').disabled = true;
                }
            });
        });

        function clearForm() {
            document.querySelectorAll('.checkmark').forEach(checkmark => {
                checkmark.style.display = 'none';
            });
            fields.forEach(field => {
                document.getElementById(field).style.borderColor = '#ccc';
            });
            document.getElementById('signupForm').reset();
        }

        document.getElementById('clear-button').addEventListener('click', clearForm);

        document.getElementById('signupForm').addEventListener('submit', function(event) {
            if (checkFullName() && checkUsername() && checkBirthdate() && checkEmail() && checkPassword() && checkRepeatPassword()) {
                alert('¡Registro exitoso!');
            } else {
                return false;
            }
        });
    </script>
</body>
</html>
